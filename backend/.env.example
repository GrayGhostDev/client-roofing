# =============================================================================
# iSwitch Roofs CRM - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# SECURITY WARNING: Never commit .env with real credentials to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Flask Configuration
# -----------------------------------------------------------------------------
# Flask environment: development, staging, production
FLASK_ENV=development

# Flask debug mode (MUST be False in production)
FLASK_DEBUG=True

# Secret key for session management and CSRF protection
# Generate with: python -c 'import secrets; print(secrets.token_hex(32))'
SECRET_KEY=your-secret-key-here-generate-with-secrets-token-hex

# Application host and port
HOST=0.0.0.0
PORT=8000

# -----------------------------------------------------------------------------
# Database Configuration (Supabase PostgreSQL)
# -----------------------------------------------------------------------------
# Supabase project URL (format: https://xxxxx.supabase.co)
SUPABASE_URL=https://your-project.supabase.co

# Supabase anon/public API key (safe for client-side use)
SUPABASE_KEY=your-supabase-anon-key-here

# Supabase service role key (NEVER expose to client-side)
# Used for admin operations and bypassing Row Level Security
SUPABASE_SERVICE_KEY=your-supabase-service-role-key-here

# Direct PostgreSQL connection string for SQLAlchemy
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:password@db.xxxxx.supabase.co:5432/postgres

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# -----------------------------------------------------------------------------
# Redis Configuration (Caching & Session Storage)
# -----------------------------------------------------------------------------
# Redis connection URL
# Local: redis://localhost:6379/0
# Docker: redis://redis:6379/0
# Cloud: redis://:password@host:port/0
REDIS_URL=redis://localhost:6379/0

# Redis cache TTL (seconds)
REDIS_CACHE_TTL=900

# Redis connection pool settings
REDIS_MAX_CONNECTIONS=50

# -----------------------------------------------------------------------------
# JWT Authentication Configuration
# -----------------------------------------------------------------------------
# JWT secret key (should be different from SECRET_KEY)
# Generate with: python -c 'import secrets; print(secrets.token_hex(32))'
JWT_SECRET_KEY=your-jwt-secret-key-here

# JWT token expiration times (in seconds)
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=2592000

# JWT algorithm
JWT_ALGORITHM=HS256

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Allowed origins for CORS (comma-separated)
# Development: http://localhost:3000,http://localhost:8501
# Production: https://yourdomain.com,https://app.yourdomain.com
CORS_ORIGINS=http://localhost:8501,http://localhost:3000

# CORS credentials flag
CORS_SUPPORTS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Email Configuration (SendGrid)
# -----------------------------------------------------------------------------
# SendGrid API key
SENDGRID_API_KEY=your-sendgrid-api-key

# Default sender email
SENDGRID_FROM_EMAIL=noreply@iswitchroofs.com

# Default sender name
SENDGRID_FROM_NAME=iSwitch Roofs CRM

# Email templates directory
EMAIL_TEMPLATES_DIR=app/templates/emails

# -----------------------------------------------------------------------------
# SMS Configuration (Twilio)
# -----------------------------------------------------------------------------
# Twilio account SID
TWILIO_ACCOUNT_SID=your-twilio-account-sid

# Twilio auth token
TWILIO_AUTH_TOKEN=your-twilio-auth-token

# Twilio phone number (format: +1234567890)
TWILIO_PHONE_NUMBER=+12345678900

# SMS provider (twilio or none)
SMS_PROVIDER=twilio

# -----------------------------------------------------------------------------
# Real-Time Updates (Pusher)
# -----------------------------------------------------------------------------
# Pusher app ID
PUSHER_APP_ID=your-pusher-app-id

# Pusher API key (safe for client-side)
PUSHER_KEY=your-pusher-key

# Pusher secret (NEVER expose to client-side)
PUSHER_SECRET=your-pusher-secret

# Pusher cluster (e.g., us2, us3, eu, ap1)
PUSHER_CLUSTER=us2

# Enable SSL for Pusher
PUSHER_SSL=true

# -----------------------------------------------------------------------------
# File Upload Configuration
# -----------------------------------------------------------------------------
# Maximum file upload size (bytes) - 50MB default
MAX_CONTENT_LENGTH=52428800

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=pdf,png,jpg,jpeg,gif,doc,docx,xls,xlsx

# Upload directory
UPLOAD_FOLDER=uploads

# -----------------------------------------------------------------------------
# Google Services Configuration
# -----------------------------------------------------------------------------
# Google Maps API key (for address validation and geocoding)
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Google Calendar OAuth 2.0 Configuration (for Appointments integration)
# Get credentials from: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID (Application type: Web application)
# 2. Add authorized redirect URI: http://localhost:8001/api/appointments/oauth2callback
# 3. Copy Client ID and Client Secret below
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8001/api/appointments/oauth2callback

# Google Local Services Ads API key (for lead tracking)
GOOGLE_LSA_API_KEY=your-google-lsa-api-key

# Google Cloud Storage bucket (for file uploads)
GCS_BUCKET_NAME=your-gcs-bucket-name

# Google Cloud credentials JSON file path
GOOGLE_APPLICATION_CREDENTIALS=credentials/google-cloud-keyfile.json

# -----------------------------------------------------------------------------
# Payment Processing (Stripe)
# -----------------------------------------------------------------------------
# Stripe publishable key (safe for client-side)
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx

# Stripe secret key (NEVER expose to client-side)
STRIPE_SECRET_KEY=sk_test_xxxxx

# Stripe webhook secret
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path
LOG_FILE=logs/iswitch_roofs_crm.log

# Log rotation settings
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# Enable JSON logging (for structured logs)
LOG_JSON=false

# -----------------------------------------------------------------------------
# Monitoring & Analytics
# -----------------------------------------------------------------------------
# Sentry DSN for error tracking
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# Sentry environment name
SENTRY_ENVIRONMENT=development

# Google Analytics tracking ID
GOOGLE_ANALYTICS_ID=UA-XXXXX-X

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Rate limit storage backend (memory or redis)
RATE_LIMIT_STORAGE=redis

# Default rate limit (requests per minute)
RATE_LIMIT_DEFAULT=60

# Rate limit for authentication endpoints
RATE_LIMIT_AUTH=10

# -----------------------------------------------------------------------------
# Background Jobs & Task Queue (Celery)
# -----------------------------------------------------------------------------
# Celery broker URL (Redis or RabbitMQ)
CELERY_BROKER_URL=redis://localhost:6379/1

# Celery result backend
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Celery timezone
CELERY_TIMEZONE=America/Detroit

# -----------------------------------------------------------------------------
# Lead Scoring Configuration
# -----------------------------------------------------------------------------
# Lead scoring weights (must sum to 1.0)
LEAD_SCORE_SOURCE_WEIGHT=0.30
LEAD_SCORE_ENGAGEMENT_WEIGHT=0.25
LEAD_SCORE_PROPERTY_WEIGHT=0.20
LEAD_SCORE_TIMING_WEIGHT=0.15
LEAD_SCORE_DEMOGRAPHIC_WEIGHT=0.10

# Lead temperature thresholds
LEAD_TEMP_HOT_THRESHOLD=80
LEAD_TEMP_WARM_THRESHOLD=60
LEAD_TEMP_COLD_THRESHOLD=40

# -----------------------------------------------------------------------------
# Business Logic Configuration
# -----------------------------------------------------------------------------
# Company name
COMPANY_NAME=iSwitch Roofs

# Service area (comma-separated zip codes)
SERVICE_AREA_ZIPS=48009,48012,48025,48067,48301,48304

# Business hours (24-hour format)
BUSINESS_HOURS_START=08:00
BUSINESS_HOURS_END=18:00

# Response time SLA (minutes)
RESPONSE_TIME_SLA=2

# Follow-up sequence count
FOLLOW_UP_SEQUENCE_COUNT=16

# Target conversion rate (percentage)
TARGET_CONVERSION_RATE=25

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable/disable features
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_PUSHER_REALTIME=true
FEATURE_LEAD_SCORING=true
FEATURE_AUTOMATED_FOLLOWUP=true
FEATURE_PARTNERSHIP_TRACKING=true
FEATURE_ANALYTICS_DASHBOARD=true

# -----------------------------------------------------------------------------
# External API Integrations
# -----------------------------------------------------------------------------
# AccuLynx CRM API (if integrating)
ACCULYNX_API_KEY=your-acculynx-api-key
ACCULYNX_API_URL=https://api.acculynx.com/v1

# BirdEye Review Management API
BIRDEYE_API_KEY=your-birdeye-api-key
BIRDEYE_BUSINESS_ID=your-birdeye-business-id

# CallRail Call Tracking API
CALLRAIL_API_KEY=your-callrail-api-key
CALLRAIL_COMPANY_ID=your-callrail-company-id

# -----------------------------------------------------------------------------
# Testing Configuration
# -----------------------------------------------------------------------------
# Test database URL (separate from production)
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/iswitch_crm_test

# Test Redis URL
TEST_REDIS_URL=redis://localhost:6379/15

# Skip external API calls in tests
TESTING=false

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Enable HTTPS redirect
FORCE_HTTPS=false

# Content Security Policy
CSP_ENABLED=true

# Enable security headers (HSTS, X-Frame-Options, etc.)
SECURITY_HEADERS_ENABLED=true

# Session cookie settings
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# -----------------------------------------------------------------------------
# Performance & Optimization
# -----------------------------------------------------------------------------
# Enable response compression
COMPRESSION_ENABLED=true

# Compression level (1-9)
COMPRESSION_LEVEL=6

# Enable query result caching
QUERY_CACHE_ENABLED=true

# Database query timeout (seconds)
DB_QUERY_TIMEOUT=30

# API response page size limits
API_MIN_PAGE_SIZE=10
API_MAX_PAGE_SIZE=100
API_DEFAULT_PAGE_SIZE=25

# -----------------------------------------------------------------------------
# Development Tools
# -----------------------------------------------------------------------------
# Enable Flask debug toolbar
DEBUG_TOOLBAR_ENABLED=false

# Enable SQL query logging
SQL_ECHO=false

# Enable request profiling
PROFILING_ENABLED=false

# -----------------------------------------------------------------------------
# Deployment Configuration
# -----------------------------------------------------------------------------
# Deployment environment
ENVIRONMENT=development

# Application version
VERSION=1.0.0

# Build number (auto-generated in CI/CD)
BUILD_NUMBER=local

# Deployment timestamp (auto-generated)
DEPLOYED_AT=2025-01-01T00:00:00Z

# =============================================================================
# End of Configuration
# =============================================================================
